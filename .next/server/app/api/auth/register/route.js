"use strict";(()=>{var e={};e.id=2,e.ids=[2],e.modules={1185:e=>{e.exports=require("mongoose")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},349:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>y,originalPathname:()=>w,patchFetch:()=>S,requestAsyncStorage:()=>g,routeModule:()=>m,serverHooks:()=>v,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>q});var a={};r.r(a),r.d(a,{POST:()=>c});var s=r(5419),i=r(9108),o=r(9678),n=r(1694),u=r(7165),l=r(8070),p=r(6521),d=r.n(p);async function c(e){try{let t=await e.json();if(await u.Z.findOne({email:t.email}))throw Error("(!!) Esiste gi\xe0 un utente registrato con questo indirizzo e-mail");let r=await d().genSalt(10),a=await d().hash(t.password,r);t.password=a;let s=new u.Z(t);return await s.save(),l.Z.json({success:!0,message:"Utente Creato"},{status:200})}catch(e){return console.error(" - ERRORE: \xe8 avvenuto un problema durante l'uso dell'api di 'api/register' --> ",e.message),l.Z.json({success:!1,message:e.message||"Si \xe8 verificato un errore durante la registrazione dell'utente"},{status:e.status||500})}}(0,n.I)();let m=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/auth/register/route",pathname:"/api/auth/register",filename:"route",bundlePath:"app/api/auth/register/route"},resolvedPagePath:"C:\\Users\\aless\\Desktop\\uni\\BookEasy\\app\\api\\auth\\register\\route.ts",nextConfigOutput:"export",userland:a}),{requestAsyncStorage:g,staticGenerationAsyncStorage:h,serverHooks:v,headerHooks:y,staticGenerationBailout:q}=m,w="/api/auth/register/route";function S(){return(0,o.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:h})}},7165:(e,t,r)=>{r.d(t,{Z:()=>o});var a=r(1185),s=r.n(a);let i=new(s()).Schema({_id:{type:String},name:{type:String,required:!0},surname:{type:String,required:!0},tel_number:{type:Number,required:!0},tel_area_code:{type:Number,required:!0},email:{type:String,required:!0,unique:!0},isAdmin:{type:Boolean,default:!1,require:!1},password:{type:String,required:!0}},{timestamps:!0}),o=s().models.User||s().model("User",i)},1694:(e,t,r)=>{r.d(t,{I:()=>i});var a=r(1185),s=r.n(a);let i=async()=>{try{await s().connect(process.env.MONGO_URL),console.log(" - Connessione al DataBase riuscita")}catch(e){console.log(" - ERRORE: si \xe8 verificato un problema nella connessione al DataBase --> ",e.message)}}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[638,206,521],()=>r(349));module.exports=a})();