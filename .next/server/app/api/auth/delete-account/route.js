"use strict";(()=>{var e={};e.id=392,e.ids=[392],e.modules={1185:e=>{e.exports=require("mongoose")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},1230:(e,t,a)=>{a.r(t),a.d(t,{headerHooks:()=>y,originalPathname:()=>q,patchFetch:()=>w,requestAsyncStorage:()=>g,routeModule:()=>m,serverHooks:()=>v,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>f});var r={};a.r(r),a.d(r,{POST:()=>p});var n=a(5419),o=a(9108),s=a(9678),i=a(1694),u=a(7165),l=a(8070),c=a(6521),d=a.n(c);async function p(e){try{let t=await e.json(),a=await u.Z.findOne({email:t.email});if(!await d().compare(t.password,a.password))throw Error("(!!) Credenziali inserite non valide");return await u.Z.findOneAndDelete({email:a.email}),l.Z.json({success:!0,message:"Eliminazione account Effettuata"},{status:200})}catch(e){return console.log(" - ERRORE: \xe8 avvenuto un problema durante l'uso dell'api di 'api/delete-account' --> ",e.message),l.Z.json({success:!1,message:e.message||"Si \xe8 verificato un errore durante la cancellazione dell'account"},{status:e.status||500})}}(0,i.I)();let m=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/auth/delete-account/route",pathname:"/api/auth/delete-account",filename:"route",bundlePath:"app/api/auth/delete-account/route"},resolvedPagePath:"C:\\Users\\aless\\Desktop\\uni\\BookEasy\\app\\api\\auth\\delete-account\\route.ts",nextConfigOutput:"export",userland:r}),{requestAsyncStorage:g,staticGenerationAsyncStorage:h,serverHooks:v,headerHooks:y,staticGenerationBailout:f}=m,q="/api/auth/delete-account/route";function w(){return(0,s.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:h})}},7165:(e,t,a)=>{a.d(t,{Z:()=>s});var r=a(1185),n=a.n(r);let o=new(n()).Schema({_id:{type:String},name:{type:String,required:!0},surname:{type:String,required:!0},tel_number:{type:Number,required:!0},tel_area_code:{type:Number,required:!0},email:{type:String,required:!0,unique:!0},isAdmin:{type:Boolean,default:!1,require:!1},password:{type:String,required:!0}},{timestamps:!0}),s=n().models.User||n().model("User",o)},1694:(e,t,a)=>{a.d(t,{I:()=>o});var r=a(1185),n=a.n(r);let o=async()=>{try{await n().connect(process.env.MONGO_URL),console.log(" - Connessione al DataBase riuscita")}catch(e){console.log(" - ERRORE: si \xe8 verificato un problema nella connessione al DataBase --> ",e.message)}}}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[638,206,521],()=>a(1230));module.exports=r})();